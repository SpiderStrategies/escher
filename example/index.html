<html>
  <head>
    <title>Escher Test</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min.js"></script>
    <script src="../src/escher.js"></script>
    <script>

        $(function () {
          var Base = Backbone.View.extend({
            attributes: {
              style: "width: 100%; height: 100%; border: solid 1px #ccc; background: #ddd; margin-top: 20px; position: absolute;"
            },

            events: {
              'click .next': 'next'
            },

            render: function () {
              this.$el.html('<div>' +
                            '  <h1 style="padding-left: 100px; padding-top: 150px;">Base layer text</h1>' +
                            '  <button class="next">Next</button>' +
                            '</div>')
              return this
            },

            next: function (e) {
              escher.push(new Layer1)
            }
          })

          var Layer1 = Backbone.View.extend({
            attributes: {
              style: "width: 100%; height: 100%; border: solid 1px #4a7497; background: #8daac3"
            },

            events: {
              'click .close': 'close',
              'click .next': 'next'
            },

            next: function (e) {
              escher.push(new Layer2)
            },

            close: function (e) {
              escher.pop()
            },

            render: function () {
              this.$el.html('<div>' +
                            '  <p style="padding-left: 30px; padding-top: 60px;">Layer 2</p>' +
                            '  <button class="next">Next</button>' +
                            '  <button class="close">Close</button>' +
                            '</div>')
              return this
            }
          })

          var Layer2 = Backbone.View.extend({
            attributes: {
              style: "width: 100%; height: 100%; border: solid 1px #8b6125; background: #ba945d;"
            },

            events: {
              'click .close': 'close'
            },

            close: function (e) {
              escher.pop()
            },

            render: function () {
              this.$el.html('<div>' +
                            '  <p style="padding-left: 30px; padding-top: 60px;">Layer 3</p>' +
                            '  <button class="close">Close</button>' +
                            '</div>')
              return this
            }
          })

          var base = new Base
          var escher = window.escher = new Backbone.Escher({
            base: base
          })
          $("#container").append(base.render().el)
        });
    </script>
  </head>
  <body>
    <div id="container"></div>
  </body>
</htm>